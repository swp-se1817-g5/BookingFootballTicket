$(function(){$('.cart-delete-button').on('click',function(e){e.preventDefault();var cart_id=$(this).data('cart_id');var url=$("input[name=checkout-delete-room]").val();var finalPrice=$('input[name=checkout_final_price]').val();var hotelPrice=$('#checkout_hotel_price_'+cart_id).val();var hotelPriceLocale=$('#checkout_hotel_price_locale_'+cart_id).val();var roomPrice=$('#roomP').val();var addRoomTrans=$("#addRoomTrans").val();$.ajax({type:"post",url:url,data:{cart_id:cart_id},success:function(response){if(response.status=="true"){var updatedGrandTotal=parseFloat(finalPrice)-parseFloat(hotelPriceLocale);updatedGrandTotal=updatedGrandTotal.toFixed(2);if(roomPrice!=0){var updatedRoomPrice=parseFloat(roomPrice)-parseFloat(hotelPrice);$('#roomP').val(updatedRoomPrice.toFixed(2));}
var tot_rooms_price=$(".tot_rooms_price").attr('data-tot-rooms-price');var updatedHotelTotal=parseFloat(tot_rooms_price)-parseFloat(hotelPriceLocale);$(".tot_rooms_price").text(updatedHotelTotal.toFixed(2));$(".tot_rooms_price").attr('data-tot-rooms-price',updatedHotelTotal);$(".hotelp").attr('data-price',updatedHotelTotal.toFixed(2));var cart_count=$(".item-no").html();cart_count=parseInt(cart_count)-1;var btn_id=response.hotel_code+"-room-"+response.room_code+"-board-"+response.board_code+"-"+response.check_in+"-"+response.check_out;$(".item-no").html(cart_count);$('.cart_'+cart_id).remove();$('.checkout_hotel_image_'+cart_id).remove();$('.checkout_hotel_detail_'+cart_id).remove();$('#checkoutFinalAmt').text(updatedGrandTotal);$('#checkoutFinalQuickAmt').text(updatedGrandTotal);$('#checkoutFinalAmtSummary').text(updatedGrandTotal);$("input[name=checkout_final_price]").val(updatedGrandTotal);$("#hotel-"+btn_id).removeAttr("disabled");$("#hotel-"+btn_id).css({"background-color":"#1131A0","pointer-events":"auto","opacity":1.6});$("#hotel-"+btn_id).html('<i class="fas fa-bed"></i> '+addRoomTrans);$("#hotel-"+btn_id).css("border","1px");$("#hotel-"+btn_id).css("border","solid #1131A0");}}});});$('.cart.user-nav .nav-icon').on('click',function(){if($(window).width()<1114){$(this).next().slideToggle(200);}});$('#deleteCart,#deleteCartMob,#deleteTicketHotels').on('click',function(){var deleteCartUrl=$('#delete-cart-url').val();var cart_ticket_id=$('#product_ticket_id').val();console.log(deleteCartUrl);console.log(cart_ticket_id);$.ajax({type:"post",url:deleteCartUrl,data:{cart_ticket_id:cart_ticket_id},success:function(response){if(response==1){window.location.href=ftpCore["rootURL"];}
else{alert("Unable to remove");}}});});});function removeRoomJustAdded(cart_id){var url=$("input[name=checkout-delete-room]").val();$.ajax({type:"post",url:url,data:{cart_id:cart_id},success:function(response){if(response.status=="true"){var cart_count=$(".item-no").html();cart_count=parseInt(cart_count)-1;var btn_id=response.hotel_code+"-room-"+response.room_code+"-board-"+response.board_code+"-"+response.check_in+"-"+response.check_out;;$(".item-no").html(cart_count);$('.cart_'+cart_id).remove();$("#hotel-"+btn_id).removeAttr("disabled");$("#hotel-"+btn_id).html('<i class="fas fa-bed"></i> Add Room');$("#hotel-"+btn_id).css("border","1px");$("#hotel-"+btn_id).css("border","solid #1131A0");$("#hotel-"+btn_id).css({"background-color":"#1131A0","pointer-events":"auto","opacity":1.6});}}});}